/* ===== Doppler/Edward — FAA-ish dark + ANSI/CRT motif ===== */

:root{
  --bg: #0f1115;
  --bg-elev: #12151b;
  --panel: #171a21;
  --panel-2: #1b1f27;

  --ink: #e7ebf1;
  --ink-dim: #b7c0d3;
  --muted: #8a93a6;
  --line: #242a33;

  --accent: #d77b1e;      /* Doppler orange */
  --accent-2: #f39a45;
  --good: #71d99c;

  --radius: 12px;
  --shadow: 0 8px 24px rgba(0,0,0,.35);
  --shadow-soft: 0 4px 14px rgba(0,0,0,.25);

  --mono: "IBM Plex Mono", ui-monospace, Menlo, Consolas, monospace;
  --sans: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
}

*{ box-sizing:border-box }
html,body{ height:100% }
html{ color-scheme: dark }
body{
  margin:0;
  background:
    radial-gradient(900px 600px at 10% -10%, rgba(215,123,30,.08), transparent 40%),
    radial-gradient(900px 600px at 90% -10%, rgba(215,123,30,.06), transparent 40%),
    var(--bg);
  color:var(--ink);
  font:16px/1.6 var(--sans);
  letter-spacing:.1px;
}

/* ===== Header / Nav ===== */
.site-header{ position:sticky; top:0; z-index:40; backdrop-filter: blur(8px); background:rgba(15,17,21,.7); border-bottom:1px solid var(--line) }
.nav{ max-width:1120px; margin:auto; padding:.75rem 1rem; display:flex; align-items:center; gap:1rem }
.brand{ display:flex; align-items:center; gap:.6rem; color:var(--ink); text-decoration:none; font-weight:700 }
.brand img{ width:22px; height:22px; border-radius:4px }
.wordmark{ letter-spacing:.3px; text-transform:lowercase }
.spacer{ flex:1 }

.links{ display:flex; align-items:center; gap:.25rem }
.links > a,
.links .submenu a,
.links .parent{
  color:var(--ink-dim); text-decoration:none; padding:.4rem .6rem; border-radius:8px; display:inline-block;
}
.links > a:hover, .links a[aria-current="page"], .links .parent:hover{ color:var(--ink); background:var(--panel) }
.links .cta{ background:var(--accent); color:#101115; font-weight:700; margin-left:.25rem }
.links .cta:hover{ background:var(--accent-2) }

/* Dropdown (About ▾) */
.has-sub{ position:relative }
.submenu{
  display:none; position:absolute; top:calc(100% + 8px); left:0; min-width:180px;
  background:var(--panel); border:1px solid var(--line); border-radius:10px;
  box-shadow:var(--shadow-soft); padding:.35rem; z-index:50;

  /* NEW: prevent "hover flicker" */
  transition:opacity .15s ease-in-out, visibility .15s ease-in-out;
  opacity:0;
  visibility:hidden;
}
.has-sub:hover .submenu,
.has-sub:focus-within .submenu{ display:block }
.submenu a:hover{ background:var(--panel-2); color:var(--ink) }

/* ===== Layout ===== */
.wrap{ max-width:1120px; margin:auto; padding: 1.75rem 1rem 2.25rem }
.narrow{ max-width:860px; margin:1rem auto }

/* ===== Buttons / Utilities ===== */
.btn{ display:inline-flex; align-items:center; gap:.5rem; border:1px solid var(--line); background:var(--panel); color:var(--ink); padding:.55rem .85rem; border-radius:10px; text-decoration:none; box-shadow:var(--shadow-soft) }
.btn:hover{ background:var(--panel-2) }
.btn.accent{ background:var(--accent); border-color:#b46215; color:#101115; font-weight:700 }
.btn.accent:hover{ background:var(--accent-2) }
.btn.ghost{ background:var(--panel); color:var(--ink); border-color:var(--line) }
.btn.ghost:hover{ background:var(--panel-2) }
.actions{ display:flex; gap:.6rem; flex-wrap:wrap }
.center{ text-align:center }
.mono{ font-family:var(--mono) }
.muted{ color:#9aa3b8 }

/* ===== Home — Hero ===== */
.hero{ display:grid; grid-template-columns: 1.15fr .95fr; gap:1.5rem; align-items:center; margin:1.25rem 0 1rem }
.hero h1{ font-size:clamp(28px,2.8vw,42px); line-height:1.12; margin:0 0 .6rem }
.hero .lead{ color:var(--ink-dim) }
.hero-img{ position:relative; overflow:hidden; border-radius:var(--radius); border:1px solid var(--line); background: radial-gradient(1200px 800px at 20% 10%, rgba(215,123,30,.08), transparent 40%), var(--panel) }
.hero-img img{ width:100%; display:block }
.crt:before{ content:""; position:absolute; inset:0; pointer-events:none; background: repeating-linear-gradient(to bottom, rgba(255,255,255,.03), rgba(255,255,255,.03) 1px, transparent 1px, transparent 2px); mix-blend-mode: soft-light; }
.ascii-mask{ position:absolute; inset:0; margin:0; padding:1rem; font:700 10px/0.9 var(--mono); color:rgba(231,235,241,.06); white-space:pre; letter-spacing:.6px; user-select:none; pointer-events:none }

/* ===== Tiles / Cards ===== */
.section{ margin:1.75rem 0 }
.tiles{ display:grid; grid-template-columns:repeat(3,1fr); gap:1rem }
.tile{ background:linear-gradient(180deg, var(--panel-2), var(--panel)); border:1px solid var(--line); border-left:4px solid var(--accent); border-radius:var(--radius); padding:1rem 1.1rem; box-shadow:var(--shadow-soft) }
.tile h3{ margin:.1rem 0 .35rem; font-size:18px }
.tile p, .tile li{ color:var(--ink-dim) }
.tile ul{ margin:.4rem 0 0 1rem }

.cards{ display:grid; grid-template-columns:repeat(3,1fr); gap:1rem }
.card{ background:var(--panel); border:1px solid var(--line); border-radius:var(--radius); padding:1rem 1.1rem; box-shadow:var(--shadow-soft) }
.card h4{ margin:.1rem 0 .25rem; font-size:16px }
.card .meta{ color:#99a3b9; font:12px/1.3 var(--mono); letter-spacing:.2px }

/* ===== Page hero & content blocks ===== */
.page-hero h1{ margin:.25rem 0 }
.page-hero .lead{ color:var(--ink-dim) }
.box{ background:var(--panel); border:1px solid var(--line); border-left:4px solid var(--accent); border-radius:var(--radius); padding:1rem; margin:.9rem 0; box-shadow:var(--shadow-soft) }

/* ===== About / Lists / Leadership ===== */
.kv{ margin:.25rem 0 .6rem }
.list-check{ list-style:none; padding:0; margin:0 }
.list-check li{ position:relative; padding-left:1.25rem; margin:.35rem 0; color:var(--ink-dim) }
.list-check li:before{ content:"✓"; position:absolute; left:0; color:var(--good); font-weight:800 }
.leadership{ display:grid; grid-template-columns:110px 1fr; gap:1rem; align-items:start; padding:1rem; border:1px solid var(--line); border-radius:var(--radius); background:var(--panel-2) }
.leadership img{ width:92px; height:92px; border-radius:50%; border:1px solid var(--line) }
.kicker{ font: 12px/1.1 var(--mono); color:#9aa3b8; letter-spacing:.3px; text-transform:uppercase }

/* ===== Advocacy — ANSI hero & overlay ===== */
.ansi-hero{ position:relative; max-width:1120px; margin: 1rem auto 0; padding:0; border:1px solid var(--line); border-radius: var(--radius); overflow:hidden; background: var(--panel); box-shadow: var(--shadow-soft) }
.ansi-hero img{ width:100%; height:auto; display:block; filter: contrast(1.06) saturate(1.02) }
.ansi-hero .hint{ position:absolute; right:.6rem; top:.5rem; z-index:2; font: 600 11px/1 var(--mono); color: #9aa3b8; opacity:.85; background: rgba(0,0,0,.35); padding:.25rem .4rem; border-radius:6px; border:1px solid var(--line) }

/* Viewport-centered overlay */
/* Image-scoped overlay (only over the ANSI figure) */
.swap{ position:relative }
.swap .mission{
  position: absolute;   /* <-- was fixed */
  inset: 0;
  z-index: 2;
  display:flex; align-items:center; justify-content:center;
  padding: 1rem;
  background: radial-gradient(900px 600px at 50% 20%, rgba(215,123,30,.08), transparent 40%),
              rgba(0,0,0,.72);
  opacity: 0;
  transition: opacity .2s ease-in-out;
  pointer-events: none; /* hover won’t get “stuck” */
}
.swap:hover .mission,
.swap:focus-within .mission{
  opacity: 1;
  /* keep pointer-events:none so moving anywhere off the image dismisses it */
}

.swap:hover .mission, .swap:focus-within .mission{ opacity:1; pointer-events:auto; cursor:zoom-out }
.mission pre{ margin:0; white-space:pre-wrap; text-align:center; font: 700 clamp(13px, 1.8vw, 18px)/1.35 var(--mono); color:#e7ebf1; letter-spacing:.25px; text-shadow: 0 0 1px rgba(255,255,255,.08) }

/* ASCII frame around overlay */
.ascii-frame{ outline:1px solid var(--line) }
.ascii-frame:before, .ascii-frame:after{ content:""; position:absolute; inset:10px; pointer-events:none; border:1px dashed rgba(199,160,120,.35) }

/* Art actions */
.art-actions{ margin:.9rem 0 0 }

/* Advocacy mini-cases */
.cases-mini .ticker{ display:grid; grid-template-columns: repeat(4, 1fr); gap:1rem; margin-top:.5rem }
.cases-mini .mini{ background: var(--panel); border:1px solid var(--line); border-radius: var(--radius); padding: .9rem 1rem; box-shadow: var(--shadow-soft) }
.cases-mini .mini h4{ margin:.1rem 0 .25rem; font-size:16px }
.cases-mini .mini p{ margin:0 0 .35rem; color:var(--ink-dim) }
.cases-mini .mini .meta{ font: 12px/1.2 var(--mono); color:#9aa3b8 }

/* ===== Team page ===== */
.team-hero{ display:grid; grid-template-columns: minmax(280px, 520px) 1fr; gap: 2rem; align-items:start; margin-top: 1rem }
.portrait-wrap{ position:relative; background:var(--panel); border:1px solid var(--line); border-radius: var(--radius); overflow:hidden; box-shadow: var(--shadow-soft) }
.portrait-ansi{ display:block; width: min(90vw, 520px); height:auto }
.bio h2{ margin:.2rem 0 .6rem }
.bio .title{ font: 700 14px/1 var(--mono); color:#9aa3b8; text-transform:uppercase }
.bio p{ color: var(--ink); margin: .65rem 0 }
.bio .aside{ color: var(--ink-dim) }
.bio .actions{ margin-top: .9rem; display:flex; gap:.6rem; flex-wrap:wrap }

/* ===== Footer ===== */
.footer{ margin: 2.2rem 0 2rem; text-align:center; color:#9aa3b8; font:12px/1.45 var(--mono) }
.footer a{ color:#c7d0e5; text-decoration:none }
.foot-links a{ padding:0 .25rem }

/* ===== Responsive ===== */
@media (max-width:1024px){
  .hero{ grid-template-columns:1fr }
  .tiles,.cards{ grid-template-columns:1fr 1fr }
  .cases-mini .ticker{ grid-template-columns: 1fr 1fr }
}
@media (max-width:680px){
  .tiles,.cards{ grid-template-columns:1fr }
  .team-hero{ grid-template-columns:1fr }
  .portrait-ansi{ width: min(96vw, 640px) }
  .mission pre{ font-weight:700; font-size:13px }
}
